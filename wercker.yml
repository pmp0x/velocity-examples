box: wercker/nodejs
no-response-timeout: 12
services:
    - wercker/mongodb
# build:
#     steps:
#         # Execute the bundle install step, a step provided by wercker
#         #- git clone https://github.com/meteor/meteor.git $WERCKER_ROOT/meteor
#         - script:
#             name: echo python information
#             code: |
#                 echo "ls $(ls -la)"
#                 echo "dir $(pwd)"

build:
  # The steps that will be executed on build
  steps:
    # A step that executes `npm install` command
    - script:
        name: Get meteor
        code: |
          if [ -f "$WERCKER_CACHE_DIR/meteor/meteor" ]; then
              info "meteor found in cache"
          else
              debug "meteor not found in cache, will download"
              curl https://install.meteor.com/ | sh
          fi
          
    - script:
        name: Get Meteor
        code: curl https://install.meteor.com/ | sh
    #- npm-install
    # A step that executes `npm test` command
    #- npm-test
    - script:
        name: Check meteor
        code: echo "meteor version $(meteor --version)"

    - script:
        name: Check meteor
        code: echo "meteor version $(meteor --version)"
        code: echo "meteor version $(meteor --version)"
  
    - script:
        name: Testing
        code:  JASMINE_BROWSER=PhantomJS cd leaderboard-jasmine && meteor --test